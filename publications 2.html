<!-- Previous HTML remains the same until the script section -->

<script>
    class Publication {
        constructor(entry) {
            this.entry = entry;
        }

        formatAuthors(authorString) {
            if (!authorString) return '';
            return authorString.split(' and ')
                .map(author => {
                    const parts = author.split(', ');
                    let formattedName;
                    if (parts.length === 2) {
                        formattedName = `${parts[1]} ${parts[0]}`;
                    } else {
                        formattedName = author;
                    }
                    if (formattedName === 'Wenbin Luo' || 
                        formattedName === 'Luo, Wenbin' ||
                        author === 'Wenbin Luo' || 
                        author === 'Luo, Wenbin') {
                        return `<strong>Wenbin Luo</strong>`;
                    }
                    return formattedName;
                })
                .join(', ');
        }

        toString() {
            const authors = this.formatAuthors(this.entry.author);
            const title = this.entry.title.replace(/[{}]/g, '');
            const year = this.entry.year;

            let content = '';
            if (this.entry.type.toLowerCase() === 'unpublished') {
                // For unpublished entries, only show author, title, and links
                content = `<div class="publication">
                    <span class="author">${authors}</span>. 
                    "<span class="title">${title}</span>." `;
                
                // Add arXiv link if available
                if (this.entry.url) {
                    content += `<span class="links">[<a href="${this.entry.url}" target="_blank">arXiv</a>]</span>`;
                }
                content += `</div>`;
            } else {
                // For published entries, show full citation
                const journal = this.entry.journal || this.entry.booktitle || '';
                const volume = this.entry.volume ? `, vol. ${this.entry.volume}` : '';
                const number = this.entry.number ? `(${this.entry.number})` : '';
                const pages = this.entry.pages ? `, pp. ${this.entry.pages}` : '';

                content = `<div class="publication">
                    <span class="author">${authors}</span>. 
                    "<span class="title">${title}</span>." 
                    <span class="journal">${journal}</span>${volume}${number}${pages}, ${year}.`;
                
                // Add journal and arXiv links if available
                if (this.entry.journal_url || this.entry.arxiv) {
                    content += '<span class="links">[';
                    if (this.entry.journal_url) {
                        content += `<a href="${this.entry.journal_url}" target="_blank">journal</a>`;
                    }
                    if (this.entry.arxiv) {
                        if (this.entry.journal_url) content += ' ';
                        content += `<a href="${this.entry.arxiv}" target="_blank">arXiv</a>`;
                    }
                    content += ']</span>';
                }
                content += `</div>`;
            }

            return content;
        }
    }

    // Rest of the JavaScript code remains the same
</script>

<!-- Rest of the HTML remains the same -->